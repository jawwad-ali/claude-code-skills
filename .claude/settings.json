{
  "PostToolUse": [
    {
      "matcher": "Write|Edit",
      "hooks": [
        {
          "type": "prompt",
          "prompt": "Analyze the code for production-grade quality. Check for issues in these categories:\n\n**Next.js Patterns:**\n- Server Components using React hooks (useState, useEffect, useContext, useReducer, useCallback, useMemo) or browser APIs (window, document, localStorage) without 'use client' directive at top of file\n- Wrong imports: 'next/router' should be 'next/navigation' for App Router\n- Server Actions files missing 'use server' directive\n- page.tsx files missing metadata export (for SEO)\n\n**Error Handling:**\n- Async operations (fetch, database calls, file operations) without try/catch blocks\n- Promises without .catch() or proper error handling\n- API route handlers not returning proper error responses with appropriate status codes (400, 404, 500)\n- fetch() calls not checking response.ok before parsing\n\n**Null Safety:**\n- Accessing nested properties without optional chaining (?.) where data could be undefined\n- Array methods (.map, .filter, .find) on potentially null/undefined arrays\n- Missing nullish coalescing (??) for default values on optional data\n- Destructuring without default values for optional properties\n\n**User Experience:**\n- Form submit handlers without loading/disabled state during submission\n- Arrays rendered with .map() without empty state fallback (check array.length)\n- Delete/destructive actions without confirmation pattern\n- Catch blocks with generic error messages instead of helpful user guidance\n- Missing loading.tsx for pages with async data fetching\n\n**Accessibility:**\n- <img> elements missing alt attribute\n- Buttons/interactive elements without accessible text or aria-label\n- Form inputs without associated <label> elements or aria-labelledby\n- onClick handlers on non-interactive elements (div, span) without role and keyboard support\n\nFormat issues found as:\n⚠️ ISSUE: [category] - [description] - Fix: [specific suggestion]\n\nIf all checks pass, respond with:\n✓ Code follows production-grade standards"
        }
      ]
    },
    {
      "matcher": "Write|Edit",
      "hooks": [
        {
          "type": "prompt",
          "prompt": "If the file just written/edited is a .py file, analyze it for production-grade Python quality. If it is NOT a .py file, respond only with: ✓ Not a Python file, skipping Python checks.\n\n**Type Safety:**\n- Functions missing type hints on parameters or return type\n- Using `Optional[X]` instead of `X | None` (Python 3.10+)\n- Using `List`, `Dict`, `Tuple` from typing instead of lowercase `list`, `dict`, `tuple`\n- Missing type hints on class attributes\n\n**Error Handling:**\n- Bare `except:` or `except Exception:` without specific exception types where possible\n- Missing `from` in exception chaining (`raise X from e`)\n- Async operations (file I/O, HTTP calls, DB queries) without try/except\n- Swallowing exceptions silently (empty except blocks or just `pass`)\n\n**Python Anti-Patterns:**\n- Using `print()` for operational output instead of `logging`\n- Mutable default arguments (`def fn(items=[])`) — use `None` + assignment or `field(default_factory=...)`\n- Using `os.path` instead of `pathlib.Path` for file operations\n- Using `dict` for structured data instead of `dataclass` or Pydantic model\n- Using `type()` for type checks instead of `isinstance()`\n- String concatenation with `+` instead of f-strings\n- `import *` (wildcard imports)\n\n**Code Quality:**\n- Functions longer than 30 lines (suggest extraction)\n- Nested code deeper than 3 levels (suggest early returns or extraction)\n- Magic numbers/strings without named constants\n- Missing docstrings on public functions/classes (single-line summary is sufficient)\n\n**Testing (if test file):**\n- Test functions not following `test_` naming convention\n- Missing assertions in test functions\n- Hard-coded test data that should be in fixtures\n- Missing edge case tests (empty input, None, boundary values)\n\n**Security:**\n- `eval()`, `exec()`, or `__import__()` with user-controlled input\n- SQL strings built with f-strings or .format() (SQL injection risk)\n- `subprocess` calls with `shell=True` and user input\n- Hardcoded secrets, passwords, or API keys\n\nFormat issues found as:\n⚠️ ISSUE: [category] - [description] - Fix: [specific suggestion]\n\nIf all checks pass, respond with:\n✓ Python code follows production-grade standards"
        }
      ]
    }
  ]
}
